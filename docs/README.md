# Formatting input files

To use FragPipe-Analyst, user need to prepare two files. One is a quantification table obtained after running FragPipe and the other one is the metadata. The table below summarizes the file combinations you should use with FragPipe-Analyst.

|                      | LFQ                                       |   DIA    |  TMT    |
| ---------------------|-------------------------------------------|----------|---------|
| Quantification Table |combined_proteins.tsv generated by IonQuant|PG matrix generated by DIANN |Gene reports generated by in TMT-I|
| Metadata   |  FragPipe Manifest | combined_annotation.txt from FragPipe | combined_annotation.txt from FragPipe|

# LFQ

For LFQ, FragPipe-Analyst uses manifest file internally used for FragPipe. It's a four column tab delimited file. It's headerless file. That means **it doesn't** contain a header for column names, but it has these four columns: `path`, `experiment`, `replicate`, and `Data.type`. For example, here is an LFQ experiment of tumor (T) and normal (N) samples. It has three replicates for each tumor:

|  |  |  |  |
|--|--|--|--|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_16_37N_1_140729074952.mzML	|N_37	|1	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_17_37N_2_140729101310.mzML	|N_37	|2	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_18_37N_3_140729122909.mzML	|N_37  |3	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_21_12T_1_140729160716.mzML	|T_12 |1	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_22_12T_2_140729182320.mzML	|T_12	|2	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_23_12T_3_140729203924.mzML	|T_12	|3	|DDA|
/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_25_27N_1_140730001730.mzML	|N_27	|1	|DDA|
/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_26_27N_2_140730023333.mzML	|N_27	|2	|DDA|
/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_27_27N_3_140730044935.mzML	|N_27	|3	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_39_3T_1.mzML	|T_3	|1	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_40_3T_2.mzML	|T_3	|2	|DDA|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_41_3T_3.mzML	|T_3|	3	|DDA|

Note that since FragPipe-Analyst focus on differential expression analysis. You should have more than one condition available in the `experiment` column like T/N or Tumor/NAT in the examples mentioned above. If you have more than one patients, you could use underscore (`_`) to label samples like `T_3`, `N_37` shown above. 

# TMT
For TMT, FragPipe-Analyst uses `combined_annotation.tsv` file as metadata. Basically, it is a tab delimited file `with` header and combines all information you documented in `annotations.txt` when you prepared your FragPipe TMT workflow. It contains following columns: `experiment`, `channel`, `label`, `plex`, `replicate`, `condition`. It will be automatically generated by *FragPipe* released recently, but **don't** upload the file blindly generated, you will need to annotate `replicate` and `condition` columns. Here is an example with four different experimental conditions and each condition is with three replicates:

experiment	| channel	|label	|plex	|replicate	|condition|
----------|------------ | ------------- | -------------| ----------| ----------
Yeast_KO11|	126	|MET6_1	|1|	1	|MET6
Yeast_KO11|	127N|	MET6_2|	1	|2	|MET6
Yeast_KO11|	127C|	MET6_3|	1	|3	|MET6
Yeast_KO11|	128N|	HIS4_1|	1	|1	|HIS4
Yeast_KO11|	128C|	HIS4_2|	1	|2	|HIS4
Yeast_KO11|	129N|	HIS4_3|	1	|3	|HIS4
Yeast_KO11|	129C|	URA2_1|	1	|1	|URA2
Yeast_KO11|	130N|	URA2_2|	1	|2	|URA2
Yeast_KO11|	130C|	URA2_3|	1	|3	|URA2
Yeast_KO11|	131N|	WT_1	|1|	1	|WT
Yeast_KO11|	131C|	WT_2	|1|	2	|WT

See [TMT tutorial](TMT-Tutorial) for more detailed analysis you could achieve through FragPipe-Analyst.

# DIA

For DIA, it uses `combined_annotation.tsv` file as metadata. It's similar to what we have for TMT, but note that columns in the `combined_annotation.txt` for DIA are not the same for DIA. FragPipe-Analyst expects it has following columns: `file`, `label`, `condition`, `replicate`. Here is an example of DIA experiment with 20 samples from CPTAC ccRCC discovery dataset:

|file|label|condition|replicate|
|--|--|--|--|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00010_T.mzML |	C3L-00010_T | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00183_NAT.mzML | C3L-00183_NAT |NAT | 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00103_NAT.mzML | C3L-00103_NAT |NAT	| 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00088_NAT.mzML | C3L-00088_NAT |NAT	| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00004_T.mzML | C3L-00004_T  | Tumor	| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00183_T.mzML | C3L-00183_T	| Tumor	| 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00004_NAT.mzML | C3L-00004_NAT |NAT |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00096_T.mzML | C3L-00096_T	| Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00097_T.mzML | C3L-00097_T  | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00026_NAT.mzML | C3L-00026_NAT |NAT |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00026_T.mzML | C3L-00026_T	| Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00096_NAT.mzML | C3L-00096_NAT |NAT | 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00103_T.mzML | C3L-00103_T  | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00010_NAT.mzML |	C3L-00010_NAT |NAT|	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00079_NAT.mzML |	C3L-00079_NAT |NAT| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00079_T.mzML | C3L-00079_T  | Tumor | 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00088_T.mzML | C3L-00088_T	| Tumor |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00011_NAT.mzML |	C3L-00011_NAT |NAT|	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00011_T.mzML | C3L-00011_T	| Tumor |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00097_NAT.mzML |  C3L-00097_NAT |NAT|	1	|

