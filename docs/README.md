# Formatting input files

To use FragPipe-Analyst, user need to prepare two files. One is a quantification table obtained after running FragPipe and the other one is the metadata. The table below summarizes the file combinations you should use with FragPipe-Analyst.

|                      | LFQ                                       |   DIA    |  TMT    |
| ---------------------|-------------------------------------------|----------|---------|
| Quantification Table |combined_proteins.tsv generated by IonQuant|PG matrix generated by DIANN |Gene reports generated by in TMT-I|
| Metadata   |  experiment_annotation.tsv | experimentd_annotation.tsv | experiment_annotation.txt |

# LFQ

For LFQ, FragPipe-Analyst uses `experiment_annotation.tsv` similar to FragPipe manifest internally used for FragPipe, but note that `experiment_annotation.tsv` is a file with header. We also rename and delete some column names. For example, here is an LFQ experiment of tumor (T) and normal (N) samples. It has three replicates for each tumor:

| file | label | replicate |
|---------------------------------------------------------------------------------|-----|---|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_16_37N_1_140729074952.mzML|N_37	|1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_17_37N_2_140729101310.mzML|N_37	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_18_37N_3_140729122909.mzML|N_37 |3	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_21_12T_1_140729160716.mzML|T_12 |1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_22_12T_2_140729182320.mzML|T_12	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_23_12T_3_140729203924.mzML|T_12	|3	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_25_27N_1_140730001730.mzML|N_27	|1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_26_27N_2_140730023333.mzML|N_27	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_27_27N_3_140730044935.mzML|N_27	|3	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_39_3T_1.mzML	          |T_3	|1	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_40_3T_2.mzML	          |T_3	|2	|
|/storage/yihsiao/data/PXD002612/convert/QEPlus07252014_41_3T_3.mzML	          |T_3  |3	|

Note that since FragPipe-Analyst focus on differential expression analysis. You should have more than one condition available in the `experiment` column like T/N or Tumor/NAT in the examples mentioned above. If you have more than one patients, you could use underscore (`_`) to label samples like `T_3`, `N_37` shown above. 

# TMT
For TMT, FragPipe-Analyst uses `experiment_annotation.tsv` file as metadata. Basically, it is a tab delimited file `with` header and combines all information you documented in `annotations.txt` when you prepared your FragPipe TMT workflow. It contains following columns: `plex`, `channel`, `sample`,  `replicate`, `condition`, `sample name`. It will be automatically generated by *FragPipe* released recently, but **don't** upload the file blindly generated, you will need to annotate `replicate` and `condition` columns. Here is an example with four different experimental conditions and each condition is with three replicates:

plex	  | channel|sample_name	|replicate	|condition| sample_name |
----------|--------|------------|-------------| ----------| ---------- |
Yeast_KO11|	126	   | MET6_1| 1 |MET6 | MET6_1
Yeast_KO11|	127N   | MET6_2| 2 |MET6 | MET6_2
Yeast_KO11|	127C   | MET6_3| 3 |MET6 | MET6_3
Yeast_KO11|	128N   | HIS4_1| 1 |HIS4 | HIS4_1
Yeast_KO11|	128C   | HIS4_2| 2 |HIS4 | HIS4_2
Yeast_KO11|	129N   | HIS4_3| 3 |HIS4 | HIS4_3
Yeast_KO11|	129C   | URA2_1| 1 |URA2 | URA2_1
Yeast_KO11|	130N   | URA2_2| 2 |URA2 | URA2_2
Yeast_KO11|	130C   | URA2_3| 3 |URA2 | URA2_3
Yeast_KO11|	131N   | WT_1  | 1 |WT   | WT_1
Yeast_KO11|	131C   | WT_2  | 2 |WT   | WT_2

Another example shown below is a common experimental desgin with tumor and normal tissue adjacent to the tumor (NAT) samples:

plex | channel| label | condition | replicate| sample_name
-----|--------|-------|-----------| ---------|
TMT_01s |126  |CPT0079430001   | NAT    | 1 | C3L-00011_N
TMT_01s |127N |CPT0023360001   | NAT	| 1 | C3O-00217_N
TMT_01s |127C |CPT0023350003   | Tumor	| 1 | C3L-00217_T
TMT_01s |128N |CPT0079410003   | Tumor	| 1 | C3L-00271_T
TMT_01s |128C |CPT0087040003   | Tumor	| 1 | C3L-00121_T
TMT_01s |129N |CPT0077310003   | Tumor	| 1 | C3L-00211_T
TMT_01s |129C |CPT0077320001   | NAT	| 1 | C3N-00911_N
TMT_01s |130N |CPT0087050003   | NAT	| 1 | C3L-00011_N
TMT_01s |130C |CPT0023710001_1 | NAT	| 1 | C3L-00011_T_1
TMT_01s |131N |pool01          | pool	| 1 | pool01
TMT_02s |126  |NCI7-1          | QC	    | 1 | NCI7_rep1
TMT_02s |127N |CPT0078840001   | NAT	| 1 | C3L-01011_N
TMT_02s |127C |CPT0075570001   | Tumor	| 1 | C3P-05117_T
TMT_02s |128N |CPT0075560003   | NAT	| 1 | C3N-05040_N
TMT_02s |128C |CPT0078830003   | Tumor	| 1 | C3L-00011_T
TMT_02s |129N |CPT0077490003   | NAT	| 1 | C3N-05168_N
TMT_02s |129C |CPT0077500001   | NAT	| 1 | C3N-55688_N
TMT_02s |130N |CPT0023690003   | Tumor	| 1 | C3P-05111_T
TMT_02s |130C |CPT0023710001_2 | Tumor	| 2 | C3L-00011_T_2
TMT_02s |131N |pool02          | pool	| 1 | pool02

See [TMT tutorial](TMT-Tutorial) for more detailed analysis you could achieve through FragPipe-Analyst.

# DIA

For DIA, it uses `experiment_annotation.tsv` file as metadata. It's similar to what we have for TMT, but note that columns in the `experiment_annotation.tsv` for DIA are not the same for TMT. FragPipe-Analyst expects it has following columns: `file`, `label`, `condition`, `replicate`. Here is an example of DIA experiment with 20 samples from CPTAC ccRCC discovery dataset:

|file|label|condition|replicate|
|--|--|--|--|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00010_T.mzML |	C3L-00010_T | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00183_NAT.mzML | C3L-00183_NAT |NAT | 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00103_NAT.mzML | C3L-00103_NAT |NAT	| 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00088_NAT.mzML | C3L-00088_NAT |NAT	| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00004_T.mzML | C3L-00004_T  | Tumor	| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00183_T.mzML | C3L-00183_T	| Tumor	| 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00004_NAT.mzML | C3L-00004_NAT |NAT |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00096_T.mzML | C3L-00096_T	| Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00097_T.mzML | C3L-00097_T  | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00026_NAT.mzML | C3L-00026_NAT |NAT |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00026_T.mzML | C3L-00026_T	| Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00096_NAT.mzML | C3L-00096_NAT |NAT | 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00103_T.mzML | C3L-00103_T  | Tumor |	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00010_NAT.mzML |	C3L-00010_NAT |NAT|	1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00079_NAT.mzML |	C3L-00079_NAT |NAT| 1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00079_T.mzML | C3L-00079_T  | Tumor | 1 |
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00088_T.mzML | C3L-00088_T	| Tumor |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00011_NAT.mzML |	C3L-00011_NAT |NAT|	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00011_T.mzML | C3L-00011_T	| Tumor |	1	|
|E:\ccRCC_DIA\DIA_20files_mzML\CPTAC_CCRCC_W_JHU_20190112_LUMOS_C3L-00097_NAT.mzML |  C3L-00097_NAT |NAT|	1	|

